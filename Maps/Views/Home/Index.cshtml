
@model IEnumerable<Maps.Models.Worker>
@{
    ViewBag.Title = "Index";
}

<h2>Карта домов</h2>
<script type="text/javascript" 
        src=" https://maps.google.com/maps/api/js?key=AIzaSyAv3o_CO_lsfWe19Vm8YRIVC84de_54Rak">
    </script>

<div id="mapCanvas" style="width:100%; height: 500px"></div>

<script type="text/javascript">
    var map = new google.maps.Map(document.getElementById('mapCanvas'),
        {
            zoom: 5,
            center: new google.maps.LatLng(50.45, 30.51)
        }
    );

    function showMarker(lat, lng, text, photo)
    {
        new google.maps.Marker({
            position: new google.maps.LatLng(lat, lng),
            title: text,
            icon: {
                url: photo,
                scaledSize: new google.maps.Size(50, 50)
            },
            map: map
        });
    }

    @foreach (var Worker in Model)
    {
        <text>
    showMarker('@Worker.lat',
               '@Worker.lng',
               '@Worker.name/@Worker.address',
               '@Worker.photo');
    </text>
    }

</script>

